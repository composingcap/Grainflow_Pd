#N canvas 168 313 1043 719 12;
#X declare -path ./assets;
#X declare -lib pdlua;
#X obj 6 34 cnv 15 685 8 empty empty Grainflow.waveform 20 -12 0 30 #000000 #373737 0;
#X obj 46 251 phasor~ 8;
#X floatatom 167 261 5 0 0 1 Traversal\ Phasor - - 0;
#X floatatom 46 224 7 0 0 1 Grain\ Clock - - 0;
#X obj 167 284 phasor~ 0.2;
#X obj 61 284 r _gf_params;
#X msg 48 147 state \$1;
#X obj 46 175 loadbang;
#X msg 48 199 8;
#X obj 224 210 loadbang;
#X msg 224 234 0.2;
#X msg 219 141 ngrains \$1;
#X obj 219 115 nbx 4 18 0 8 0 0 empty empty ngrains 0 -8 0 10 #e4e4e4 #4d4d4d #373737 0 256;
#X obj 49 107 tgl 25 0 empty empty empty 17 7 0 10 #e4e4e4 #4d4d4d #373737 0 1;
#X text 77 106 <= Start grainflow;
#X obj 48 447 *~ 0.25;
#X obj 48 417 grainflow.stereoPan~ 0.5 1;
#X obj 48 477 dac~ 1;
#X obj 47 318 grainflow~ waveformBuffer 8, f 37;
#N canvas 471 409 1043 255 _loadBuffers 0;
#X obj 33 118 soundfiler;
#X obj 48 -9 loadbang;
#X obj 455 108 array define _gf_customEnv;
#X obj 500 138 array define _gf_2d_envelope;
#X obj 58 195 declare -path ./assets;
#X msg 280 34 read -resize grainflow.Pluck.aif _gf_customEnv;
#X msg 419 66 read -resize grainflow.2DEnvelope.aif _gf_2d_envelope;
#X obj 171 103 array define waveformBuffer;
#X obj 171 131 array define waveformBuffer2;
#X msg 35 36 read -resize bells.wav waveformBuffer;
#X msg 111 67 read -resize bassColLengo.wav waveformBuffer2;
#X connect 1 0 9 0;
#X connect 1 0 10 0;
#X connect 1 0 5 0;
#X connect 1 0 6 0;
#X connect 5 0 0 0;
#X connect 6 0 0 0;
#X connect 9 0 0 0;
#X connect 10 0 0 0;
#X restore 516 9 pd _loadBuffers;
#N canvas 117 193 1164 1033 reference 0;
#X obj 14 21 cnv 15 600 9 empty empty ARGS: 0 20 0 14 #000000 #373737 0;
#X obj 14 147 cnv 15 600 9 empty empty INLETS: 0 20 0 14 #000000 #373737 0;
#X obj 14 266 cnv 15 600 9 empty empty OUTLETS: 0 20 0 14 #000000 #373737 0;
#X text 38 314 (list) Grain Info;
#X text 14 179 (mc sig) Grain Clock: controls the lifetime of all of the grains, f 69;
#X text 14 198 (mc sig )Traversal Phasor: Controls the initial sampling position in the array, f 79;
#X text 14 217 (mc sig) Transposition Modulation;
#X text 14 236 (mc sig) Amplitude Modulation;
#X text 38 295 (mc sig) Grains;
#X text 38 334 (mc sig) State;
#X text 186 295 (mc sig) Array Position;
#X text 38 354 (mc sig) Lifetime;
#X text 186 322 (mc sig) Buffer Channel;
#X text 186 347 (mc sig) Stream ID;
#X obj 14 386 cnv 15 600 9 empty empty PARAMS: 0 20 0 14 #000000 #373737 0;
#X text 14 444 delay- delay time in ms;
#X text 14 468 rate- changes play speed in terms of rate;
#X text 14 492 transpose-rate in semitones;
#X text 14 516 glisson- rate over the duration of the grain;
#X text 14 540 glissonSt- glisson in semitones;
#X text 14 564 amp- changes the volume in amps;
#X text 14 588 space- empty space at the end of each grain (0-1);
#X text 14 660 density- the probability a grain will fire (0-1);
#X text 14 772 rateQuantizeSemi- quantizes transposition values to a number of semitones, f 74;
#X text 14 684 direction- probability or the direction of playback(-1 - 1);
#X obj 14 797 cnv 15 600 9 empty empty MESSAGES: 0 20 0 14 #000000 #373737 0;
#X text 14 420 (many have random and offset varients);
#X text 14 902 deviate {param} {f1} {f2} : randomly asigns a value to each grain f1 distance from f2., f 85;
#X text 14 926 spread {param} {f1} {f2} : evenly distributes values from f1 to f2, f 71;
#X text 14 950 g {n} {param} {f} : set a param for a single grain, f 71;
#X text 14 1017 streamSet {mode} {n} : asigns n streams in mode auto \, per \, or random, f 71;
#X text 14 1040 stream {param} {f} : sets a param for all grains in a stream;
#X text 14 1063 streamDeviate {param} {f1} {f2}: deviate for streams, f 71;
#X text 14 1086 streamSpread {param} {f1} {f2}: spread for streams, f 65;
#X obj 14 985 cnv 15 600 8 empty empty STREAMS: 0 20 0 14 #000000 #373737 0;
#X obj 14 1113 cnv 15 500 8 empty empty ARRAYS: 0 20 0 14 #000000 #373737 0;
#X text 159 295 4;
#X text 14 295 0;
#X text 14 1147 buf {name} : Array to granulate;
#X text 14 1169 env {name} {n} : array to be used as an envelope. n determines the number of envelopes contained in a 2D envelope., f 71;
#X text 14 1207 delayBuffer {name} : used if delayMode is set to 1 or 2;
#X text 14 1230 rateBuffer {name} : used if rateMode is set to 1 or 2;
#X text 14 1253 windowBuffer {name} : used if windowMode is set to 1 or 2;
#X text 14 1276 glissonBuffer {name} {n} : used if glisson mode is set to 1 n determines the number of envelopes contained in a 2D array., f 73;
#X text 14 708 {envelope | glisson}Position - sets the position to sample a 2D envelope | glisson, f 82;
#X text 14 612 window- position of each grain window (0-1), f 48;
#X text 14 732 {delay|window|rate|glisson}Mode - 0 is normal. 1 samples buffer based on grain. 2 samples buffer randomly, f 86;
#X text 14 878 autoOverlap {i}- sets windowOffset to 1/ngrains if i >= 1;
#X text 14 854 ngrains {i}- the number of active grains;
#X text 14 831 state {i}- toggles audio proccessing;
#X text 14 636 ---The following only have base version---;
#X text 14 52 buffer-name- array to granulate;
#X text 14 70 max-grains- the maximum number of grains that can be used;
#X text 14 91 (optional)envelope-name- array that can be used for an envelope, f 73;
#X text 14 111 (optional)flags- parameters set on initialization in the format -param arg1.. argn, f 83;
#X text 14 -1 [grainflow~];
#X restore 399 9 pd reference;
#X obj 400 57 declare -lib pdlua;
#X obj 349 356 grainflow.waveform waveformBuffer;
#X msg 320 185 delayRandom 200;
#X connect 1 0 18 0;
#X connect 2 0 4 0;
#X connect 3 0 1 0;
#X connect 4 0 18 1;
#X connect 5 0 18 0;
#X connect 6 0 18 0;
#X connect 7 0 8 0;
#X connect 8 0 3 0;
#X connect 9 0 10 0;
#X connect 10 0 2 0;
#X connect 11 0 18 0;
#X connect 12 0 11 0;
#X connect 13 0 6 0;
#X connect 15 0 17 0;
#X connect 16 0 15 0;
#X connect 18 0 16 0;
#X connect 18 1 22 0;
#X connect 18 2 16 1;
#X connect 23 0 18 0;
